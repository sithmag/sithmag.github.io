<!-- Lastly modified by Hanlin CAI in 2023/04/26 -->
<!-- It is not recommended to modify this code, unless you are a Pro-->

<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->

<head>
<!-- It is not recommended to modify this code, unless you are a Pro-->
<!-- Lastly modified by Hanlin CAI in 2023/04/26 -->

<meta charset="utf-8">
<title>Projects &#8211; Sithma Gunawardena</title>







<meta property="og:locale" content="en_US">
<meta property="og:title" content="Projects &#8211; Sithma Gunawardena">
<meta property="og:description" content="Below is a selection of projects across **electrochemical diagnostics**, **assistive technology**, **biomedical instr...">
<meta property="og:url" content="http://localhost:4000/projects/index.html">
<meta property="og:site_name" content="Sithma Gunawardena">


<meta name="google-site-verification" content="SkiyuGpJOKT74vv5GmXLvYXXDkXy4v8VWPtbelYz3Hs">





<link rel="canonical" href="
http://localhost:4000/projects/
">



<!-- Mobile meta -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic" rel="stylesheet" type="text/css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous" />

<!-- Main stylesheet -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="/assets/css/ie.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

<!-- Modernizr -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"
        integrity="sha512-3n19xznO0ubPpSwYCRRBgHh63DrV+bdZfHK52b1esvId4GsfwStQNPJFjeQos2h3JwCmZl0/LgLxSKMAI55hgw=="
        crossorigin="anonymous"></script>

<!-- ===================== -->
<!-- ✅ FAVICON (FIXED) -->
<!-- ===================== -->

<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

<!-- Apple / iOS -->
<link rel="apple-touch-icon" href="/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Sithma Gunawardena">


<script src="https://cdn.counter.dev/script.js" data-id="4c8f7caa-2b55-46cd-a995-2c4633303773" data-utcoffset="8"></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T5N5JY1E21"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T5N5JY1E21');
</script>

</head>


<body class="page" itemscope itemtype="http://schema.org/WebPage">

<!-- [if lt IE 6]><div class="chrome-frame alert alert-info"><strong>Your browser is really old!</strong> <a href="http://browsehappy.com/">Why not upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better enjoy this site?</div><![endif] -->

<!-- It is not recommended to modify this code, unless you are a Pro-->
<!-- Lastly modified by Hanlin CAI in 2023/01/15 -->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://localhost:4000">Sithma Gunawardena</a>
	</div><!-- /.site-name -->
  
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
		    <ul>
		        
            <li><a href="http://localhost:4000/aboutme/" >About Me</a></li>
		        
            <li><a href="http://localhost:4000/projects/" class="top-navigation-current">Projects</a></li>
		        
            <li><a href="http://localhost:4000/work-experience/" >Work Experience</a></li>
		        
            <li><a href="http://localhost:4000/hobbies/" >Hobbies</a></li>
		        
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->

<!-- Lastly modified by Hanlin CAI in 2023/05/01 -->



<div id="main" role="main"  itemprop="mainContentOfPage">
  <div class="article-author-top">
    <img src="http://localhost:4000/images/sithmagunawardena.jpg" class="bio-photo" alt="Sithma Gunawardena bio photo" width="160" height="160"></a>

<!-- <h4>Sithma Gunawardena</h4> -->

<p></p>

<p style="text-indent:0;margin-top:1.5em;"><a href="mailto:sithma100@gmail.com" target="_blank"><i class="icon-mail"></i> Email</a></p>





<p style="text-indent:0;"><a href="https://facebook.com/sithma.gunawardena.5"><i class="icon-facebook"></i> Facebook</a></p>



<p style="text-indent:0;"><a href="https://linkedin.com/in/sithma-g-207397216"><i class="icon-linkedin"></i> LinkedIn</a></p>



<p style="text-indent:0;"><a href="https://github.com/sithmag"><i class="icon-github"></i> Github</a></p>















<!-- Lastly modified by Hanlin CAI in 2023/10/15 -->
  </div>
  <article itemscope itemtype="http://schema.org/CreativeWork">
  
    <div class="article-wrap" itemprop="text">
      <p>Below is a selection of projects across <strong>electrochemical diagnostics</strong>, <strong>assistive technology</strong>, <strong>biomedical instrumentation</strong>, <strong>data science</strong>, and <strong>engineering consulting</strong>. Each project includes a short summary, my contributions, and key deliverables.</p>

<p><br />
<strong>Jump to:</strong></p>
<ul>
  <li><a href="#mpo-ibd">Electrochemical Biosensing of Myeloperoxidase (MPO) for Inflammatory Bowel Disease Diagnostics</a><br />
<br /></li>
  <li><a href="#cpa-seating">Customised Seating Solutions for Individuals with Cerebral Palsy</a><br />
<br /></li>
  <li><a href="#satb2">Supportive Solutions in Lower Limbs for Individuals with Neurological Conditions (SATB2)</a><br />
<br /></li>
  <li><a href="#edward-ford">Edward Ford Building Retrofit — Risk Analysis and Development Plan</a><br />
<br /></li>
  <li><a href="#ppg">Design and Development of a Photoplethysmography (PPG) Pulse Oximeter</a> 
<br /> 
<br /></li>
  <li><a href="#heart-attack-ml">Machine Learning Model for Heart Attack Risk Prediction</a></li>
</ul>

<hr />

<h2 id="electrochemical-biosensing-of-myeloperoxidase-mpo-for-inflammatory-bowel-disease-diagnostics"><a id="mpo-ibd"></a>Electrochemical Biosensing of Myeloperoxidase (MPO) for Inflammatory Bowel Disease Diagnostics</h2>
<p><strong>2025 – 2026</strong> · <em>University of Sydney (Honours Thesis)</em></p>

<p><strong>Overview</strong><br />
Developing an electrochemical biosensing workflow for <strong>faecal myeloperoxidase (fMPO)</strong> as a biomarker for <strong>inflammatory bowel disease (IBD)</strong>, with the goal of improving assay sensitivity, repeatability, and translation toward point-of-care testing.</p>

<p><strong>Key contributions</strong></p>
<ul>
  <li>Designing electrochemical experiments and calibration workflows for clinically relevant detection</li>
  <li>Analysing signals using <strong>Python/MATLAB</strong> with emphasis on repeatability and interpretability</li>
  <li>Translating chemical/assay behaviour into measurable electrochemical outputs for diagnostic use-cases</li>
  <li>Producing structured technical documentation suitable for research and industry audiences</li>
</ul>

<details style="margin-top: 8px;">
  <summary style="cursor: pointer; font-weight: 600;">
    View thesis report (PDF)
  </summary>

  <iframe src="/mypapers/Thesis/Developing%20a%20novel%20diagnostic%20solution%20for%20Inflammatory%20Bowel%20Disease.pdf" style="width: 100%; height: 900px; border: 1px solid #ddd; border-radius: 8px; margin-top: 10px;" loading="lazy">
  </iframe>

  <p style="margin-top: 8px;">
    <a href="/mypapers/Thesis/Developing%20a%20novel%20diagnostic%20solution%20for%20Inflammatory%20Bowel%20Disease.pdf" download="">
      Download full thesis (PDF)
    </a>
  </p>
</details>

<p><strong>Skills / tools</strong><br />
Electrochemistry · Biosensing · Experimental design · Data analysis · Technical reporting</p>

<hr />

<h2 id="customised-seating-solutions-for-individuals-with-cerebral-palsy"><a id="cpa-seating"></a>Customised Seating Solutions for Individuals with Cerebral Palsy</h2>
<p><strong>Jun 2024 – Aug 2024</strong> · <em>Jacaranda Flame Consulting (University of Sydney) in collaboration with the Cerebral Palsy Alliance (CPA)</em></p>

<p><strong>Overview</strong><br />
Led the development of customised seating solutions to improve comfort, durability, and real-world usability for individuals with Cerebral Palsy—balancing biomechanics, material behaviour, and client-specific requirements.</p>

<p><strong>Key contributions</strong></p>
<ul>
  <li>Researched and selected <strong>biomaterials</strong> (foam, hydrogels, lattice-oriented TPU) to optimise comfort and durability</li>
  <li>Designed complex seating cushion geometries using <strong>CAD / Blender</strong> workflows</li>
  <li>Built functional prototypes for real-world testing with wheelchair design considerations</li>
  <li>Managed a consulting team to deliver outcomes against <strong>project charter deadlines</strong></li>
  <li>Facilitated discussions with <strong>CPA, clients, and supervisors</strong> to align technical work with user needs</li>
  <li>Presented technical findings and design solutions to stakeholders</li>
</ul>

<p><strong>Deliverables</strong></p>
<ul>
  <li>
    <details>
      <summary style="cursor: pointer; font-weight: 600;">View report (PDF)</summary>

      <iframe src="/mypapers/Internship/Final%20Report.pdf" style="width: 100%; height: 900px; border: 1px solid #ddd; border-radius: 8px; margin-top: 10px;" loading="lazy">
      </iframe>

      <p style="margin-top: 8px;">
        <a href="/mypapers/Internship/Final%20Report.pdf" download="">Download Report (PDF)</a>
      </p>
    </details>
  </li>

  <li>
    <details>
      <summary style="cursor: pointer; font-weight: 600;">View presentation (PDF)</summary>

      <iframe src="/mypapers/Internship/Final%20Presentation.pdf" style="width: 100%; height: 900px; border: 1px solid #ddd; border-radius: 8px; margin-top: 10px;" loading="lazy">
      </iframe>

      <p style="margin-top: 8px;">
        <a href="/mypapers/Internship/Final%20Presentation.pdf" download="">Download Presentation (PDF)</a>
      </p>
    </details>
  </li>

  <li>
    <strong>Team photo</strong><br />
    <a href="/mypapers/Internship/Team%20Photo%20Cerebral%20Palsy%20Alliance.jpeg" target="_blank">
      <img src="/mypapers/Internship/Team%20Photo%20Cerebral%20Palsy%20Alliance.jpeg" alt="Cerebral Palsy Alliance internship team photo" style="max-width: 80%; border-radius: 8px; margin-top: 8px; cursor: zoom-in;" />
    </a>
  </li>
</ul>

<p><strong>Skills / tools</strong><br />
Project management · Engineering consulting · CAD (Blender) · Prototyping · Risk analysis · Client communication</p>

<hr />

<h2 id="supportive-solutions-in-lower-limbs-for-individuals-with-neurological-conditions-satb2"><a id="satb2"></a>Supportive Solutions in Lower Limbs for Individuals with Neurological Conditions (SATB2)</h2>
<p><strong>Aug 2023 – Nov 2023</strong> · <em>University of Sydney</em></p>

<p><strong>Overview</strong><br />
Led the end-to-end design and prototyping of a custom-fit orthotic for an individual with SATB2, using human-centred biomedical design and iterative testing to improve comfort, safety, and mobility support.</p>

<p><strong>Key contributions</strong></p>
<ul>
  <li>Led concept development, design iterations, and prototyping with a multidisciplinary team</li>
  <li>Applied <strong>human-centred design</strong> to meet patient-specific constraints and goals</li>
  <li>Modelled custom geometry in <strong>CAD</strong> for fit and refinement</li>
  <li>Conducted iterative testing sessions and incorporated client feedback</li>
  <li>Produced high-detail documentation and delivered formal presentations</li>
</ul>

<p><strong>Deliverables</strong></p>

<ul>
  <li>
    <details>
      <summary>View Report (PDF)</summary>

      <iframe src="/mypapers/SATB2/Supportive_Solutions_in_Lower_Limb_for_Individuals_with_Neurological_Conditions.pdf" style="width: 100%; height: 900px;" loading="lazy">
      </iframe>

      <p>
        <a href="/mypapers/SATB2/Supportive_Solutions_in_Lower_Limb_for_Individuals_with_Neurological_Conditions.pdf" download="">
          Download Report (PDF)
        </a>
      </p>
    </details>
  </li>

  <li>
    <details>
      <summary>View Presentation (PDF)</summary>

      <iframe src="/mypapers/SATB2/Supportive_Solutions_in_Lower_Limbs_for_Individuals_with_Neurological_Conditions_Presentation.pdf" style="width: 100%; height: 900px;" loading="lazy">
      </iframe>

      <p>
        <a href="/mypapers/SATB2/Supportive_Solutions_in_Lower_Limbs_for_Individuals_with_Neurological_Conditions_Presentation.pdf" download="">
          Download Presentation (PDF)
        </a>
      </p>
    </details>
  </li>
</ul>

<p><strong>Skills / tools</strong><br />
Orthotic prototyping · CAD · Testing &amp; iteration · Technical documentation · Team leadership</p>

<hr />

<h2 id="edward-ford-building-retrofit--risk-analysis-and-development-plan"><a id="edward-ford"></a>Edward Ford Building Retrofit — Risk Analysis and Development Plan</h2>
<p><strong>Feb 2024 – May 2024</strong> · <em>University of Sydney</em></p>

<p><strong>Overview</strong><br />
Contributed to a renovation proposal for the heritage-listed Edward Ford Building, focusing on usability improvements while respecting heritage constraints.</p>

<p><strong>Key contributions</strong></p>
<ul>
  <li>Proposed renovation concepts to improve navigation, lounge areas, and open office functionality</li>
  <li>Performed structured <strong>risk analysis</strong> and built a professional project timeline / plan</li>
  <li>Developed CAD models and supported <strong>cost estimation / pricing</strong> for materials and labour</li>
</ul>

<p><strong>Deliverables</strong></p>
<ul>
  <li>
    <details>
      <summary>View report (PDF)</summary>

      <iframe src="/mypapers/Edward_Ford/Retrofit_Plan.pdf" style="width: 100%; height: 900px;" loading="lazy">
      </iframe>

      <p>
        <a href="/mypapers/Edward_Ford/Retrofit_Plan.pdf" download="">Download Report (PDF)</a>
      </p>
    </details>
  </li>
</ul>

<p><strong>Skills / tools</strong><br />
Risk management · Regulatory/heritage considerations · CAD modelling · Project planning · Costing</p>

<hr />

<h2 id="design-and-development-of-a-photoplethysmography-ppg-pulse-oximeter"><a id="ppg"></a>Design and Development of a Photoplethysmography (PPG) Pulse Oximeter</h2>
<p><strong>Aug 2023 – Oct 2023</strong> · <em>University of Sydney</em></p>

<p><strong>Outcome</strong><br />
Achieved <strong>top-ranked system demonstration performance</strong> and was invited to an exclusive demonstration session.</p>

<p><strong>Overview</strong><br />
Designed and built a PPG-based pulse oximeter using Arduino acquisition, Python signal processing, and a GUI for live visualisation of heart rate and SpO₂.</p>

<p><strong>Key contributions</strong></p>
<ul>
  <li>Built the acquisition pipeline with <strong>Arduino</strong> and implemented core signal processing</li>
  <li>Extracted physiological parameters (heart rate, SpO₂) from PPG waveforms</li>
  <li>Developed a Python-based <strong>GUI</strong> for real-time monitoring and display</li>
  <li>Conducted calibration and validation testing to ensure accuracy and reliability</li>
</ul>

<p><strong>Deliverables</strong></p>
<ul>
  <li>
    <details>
      <summary>View Report (PDF)</summary>

      <iframe src="/mypapers/PPG_Design/Heart_Beat_Measurinator_3000.pdf" style="width: 100%; height: 900px;" loading="lazy">
      </iframe>

      <p>
        <a href="/mypapers/PPG_Design/Heart_Beat_Measurinator_3000.pdf" download="">
          Download Report (PDF)
        </a>
      </p>
    </details>
  </li>
</ul>

<details>
  <summary><strong>View full project code</strong></summary>


<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="c1"># GUI
</span><span class="sh">"""</span><span class="s">
Calls a series of pySimpleGUI demonstration functions and collects
output for use in GUI lab.
Author: Sithma
Date: 6/9/23
</span><span class="sh">"""</span>
<span class="kn">import</span> <span class="n">PySimpleGUI</span> <span class="k">as</span> <span class="n">sg</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">from</span> <span class="n">tkinter</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="n">matplotlib.backends.backend_tkagg</span> <span class="kn">import</span> <span class="n">FigureCanvasTkAgg</span><span class="p">,</span> <span class="n">FigureCanvasAgg</span>
<span class="kn">from</span> <span class="n">matplotlib.figure</span> <span class="kn">import</span> <span class="n">Figure</span>
<span class="kn">import</span> <span class="n">tkinter</span> <span class="k">as</span> <span class="n">TK</span>
<span class="kn">import</span> <span class="n">matplotlib</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="n">serial</span>
<span class="kn">import</span> <span class="n">time</span>
<span class="kn">import</span> <span class="n">sys</span>
<span class="kn">import</span> <span class="n">csv</span>
<span class="kn">import</span> <span class="n">re</span>

<span class="c1"># label the port and define conditions for the serial port
</span><span class="n">portName</span><span class="o">=</span><span class="sh">"</span><span class="s">/dev/tty.ESP32sithma-ESP32SPP</span><span class="sh">"</span>
<span class="n">serialPort</span> <span class="o">=</span> <span class="n">serial</span><span class="p">.</span><span class="nc">Serial</span><span class="p">(</span>
        <span class="n">port</span><span class="o">=</span><span class="n">portName</span><span class="p">,</span>
        <span class="n">baudrate</span><span class="o">=</span><span class="mi">115200</span><span class="p">,</span>
        <span class="n">bytesize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">stopbits</span><span class="o">=</span><span class="n">serial</span><span class="p">.</span><span class="n">STOPBITS_ONE</span>
    <span class="p">)</span>
<span class="n">serialPort</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
<span class="c1"># open the serial port - if it fails, print error message
</span><span class="k">try</span><span class="p">:</span>
    <span class="n">serialPort</span><span class="p">.</span><span class="nf">open</span><span class="p">()</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Port open failed: </span><span class="sh">"</span> <span class="o">+</span> <span class="n">portName</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">sys</span><span class="p">.</span><span class="nf">exc_info</span><span class="p">():</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">  </span><span class="sh">"</span><span class="p">,</span><span class="n">e</span><span class="p">)</span>

<span class="n">HeartRate</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">def</span> <span class="nf">interpretData</span><span class="p">():</span>
    <span class="sh">'''</span><span class="s">
    Function to read and intepret data from the microcontroller
    Outputs: 
    PulseData = a list of pulse readings from the sensor being received from the microncontroller
    HeartRate = a float representing averaged heart rate value being calculated using Arduino over the 50 pulse readings recorded
    no_data_check = a boolean variable recording whether or not data is being received
    sequence = packet number received from ESP
    button = status of button - 0 = not pressed, 1 = pressed
    </span><span class="sh">'''</span>
    <span class="c1"># initialise important variables for later
</span>    <span class="n">HeartRate</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">PulseData</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">sequence</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">button</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">if</span> <span class="n">serialPort</span><span class="p">.</span><span class="nf">isOpen</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">serialPort</span><span class="p">.</span><span class="n">in_waiting</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">serial_string</span> <span class="o">=</span> <span class="n">serialPort</span><span class="p">.</span><span class="nf">readline</span><span class="p">().</span><span class="nf">decode</span><span class="p">(</span><span class="sh">"</span><span class="s">ASCII</span><span class="sh">"</span><span class="p">).</span><span class="nf">strip</span><span class="p">()</span>
            <span class="n">unpacked_data</span> <span class="o">=</span> <span class="n">serial_string</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">"</span><span class="s">,</span><span class="sh">"</span><span class="p">)</span>
            <span class="n">data_points</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">if</span> <span class="n">unpacked_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="sh">"</span><span class="s">No data</span><span class="sh">"</span><span class="p">:</span>
                <span class="n">PulseData</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">50</span>
                <span class="n">HeartRate</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">no_data_check</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="n">sequence</span> <span class="o">=</span> <span class="mi">0</span>
                
            <span class="k">else</span><span class="p">:</span>
                <span class="n">no_data_check</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">53</span><span class="p">):</span>
                    <span class="n">input_string</span> <span class="o">=</span> <span class="n">unpacked_data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                    <span class="nf">print</span><span class="p">(</span><span class="n">input_string</span><span class="p">)</span>
                    <span class="n">numeric_string</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">[^0-9.]</span><span class="sh">'</span><span class="p">,</span> <span class="sh">''</span><span class="p">,</span> <span class="n">input_string</span><span class="p">)</span>  <span class="c1"># Remove non-numeric characters
</span>                    <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">numeric_string</span><span class="p">)</span>  <span class="c1"># Convert the cleaned string to an integer
</span>                        <span class="k">except</span> <span class="nb">ValueError</span><span class="p">:</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
                        <span class="n">data_points</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                        
                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">50</span><span class="p">:</span> 
                        <span class="n">HeartRate</span> <span class="o">=</span> <span class="nf">float</span><span class="p">(</span><span class="n">numeric_string</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">51</span><span class="p">:</span>
                        <span class="n">sequence</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">numeric_string</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">52</span><span class="p">:</span>
                        <span class="n">button</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">numeric_string</span><span class="p">)</span>
                <span class="n">PulseData</span> <span class="o">=</span> <span class="n">data_points</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">PulseData</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">no_data_check</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">PulseData</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">no_data_check</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="n">PulseData</span><span class="p">,</span> <span class="n">HeartRate</span><span class="p">,</span> <span class="n">no_data_check</span><span class="p">,</span> <span class="n">sequence</span><span class="p">,</span> <span class="n">button</span>

<span class="k">def</span> <span class="nf">saveDataCSV</span><span class="p">(</span><span class="n">csv_data</span><span class="p">,</span> <span class="n">csv_HR_value</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="sh">'</span><span class="s">SensorReadings.csv</span><span class="sh">'</span><span class="p">):</span>
    <span class="sh">'''</span><span class="s"> Takes in csv lists generated from reading data and outputs a file to the computer containing these lists</span><span class="sh">'''</span>
    <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">Sensor Reading</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Heart Rate (BPM)</span><span class="sh">'</span><span class="p">]</span>
    <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="sh">'</span><span class="s">w</span><span class="sh">'</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="sh">''</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="nf">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">writer</span><span class="p">.</span><span class="nf">writerow</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">csv_data</span><span class="p">)):</span>
            <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">csv_data</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">csv_HR_value</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
            <span class="n">writer</span><span class="p">.</span><span class="nf">writerow</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">HR_Alarm</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">HeartRate</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">):</span>
    <span class="sh">'''</span><span class="s">Creates the alarms for if the heart rate exceeds or falls below maximum and minimum allowable values</span><span class="sh">'''</span>
    <span class="n">time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">()</span>
    <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">HeartRate</span> <span class="o">&lt;</span> <span class="n">lower</span><span class="p">:</span>
        <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">System Log</span><span class="sh">"</span><span class="p">].</span><span class="nf">update</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="sh">"</span><span class="s">%a %b %d %H</span><span class="si">:</span><span class="o">%</span><span class="n">M</span><span class="si">:</span><span class="o">%</span><span class="n">S</span> <span class="o">%</span><span class="n">Y</span><span class="sh">"</span><span class="s">)</span><span class="si">}</span><span class="s">: Heart Rate too low! </span><span class="se">\n</span><span class="sh">'</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">HR alarm</span><span class="sh">"</span><span class="p">].</span><span class="nf">update</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">Heart Rate too low! </span><span class="se">\n</span><span class="sh">'</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">HeartRate</span> <span class="o">&gt;</span> <span class="n">upper</span><span class="p">:</span>
        <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">System Log</span><span class="sh">"</span><span class="p">].</span><span class="nf">update</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="sh">"</span><span class="s">%a %b %d %H</span><span class="si">:</span><span class="o">%</span><span class="n">M</span><span class="si">:</span><span class="o">%</span><span class="n">S</span> <span class="o">%</span><span class="n">Y</span><span class="sh">"</span><span class="s">)</span><span class="si">}</span><span class="s">: Heart Rate too high! </span><span class="se">\n</span><span class="sh">'</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">HR alarm</span><span class="sh">"</span><span class="p">].</span><span class="nf">update</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">Heart Rate too high! </span><span class="se">\n</span><span class="sh">'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">HR alarm</span><span class="sh">"</span><span class="p">].</span><span class="nf">update</span><span class="p">(</span><span class="sa">f</span><span class="sh">''</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">Packets</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">last_number</span><span class="p">,</span> <span class="n">window</span><span class="p">):</span>
    <span class="sh">'''</span><span class="s">Checks that all the packets have been delivered in order</span><span class="sh">'''</span>
    <span class="k">if</span> <span class="n">sequence</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">last_number</span> <span class="o">==</span> <span class="n">sequence</span><span class="p">:</span>
            <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">System Log</span><span class="sh">"</span><span class="p">].</span><span class="nf">update</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Packet =  </span><span class="si">{</span><span class="n">sequence</span><span class="si">}</span><span class="s"> </span><span class="se">\n</span><span class="sh">"</span><span class="p">,</span> <span class="n">append</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
            <span class="n">last_number</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">System Log</span><span class="sh">"</span><span class="p">].</span><span class="nf">update</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Packets received out of order </span><span class="se">\n</span><span class="sh">"</span><span class="p">,</span> <span class="n">append</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
            <span class="n">last_number</span> <span class="o">=</span> <span class="n">sequence</span>
            <span class="n">last_number</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">last_number</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">System Log</span><span class="sh">"</span><span class="p">].</span><span class="nf">update</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Packet = </span><span class="si">{</span><span class="n">sequence</span><span class="si">}</span><span class="s"> </span><span class="se">\n</span><span class="sh">"</span><span class="p">,</span> <span class="n">append</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
        <span class="n">last_number</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">sequence</span><span class="p">,</span> <span class="n">last_number</span>

<span class="k">def</span> <span class="nf">system_log</span><span class="p">():</span>
    <span class="sh">'''</span><span class="s">Creates layout for system log</span><span class="sh">'''</span>
    <span class="n">system_log_layout</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">sg</span><span class="p">.</span><span class="nc">Multiline</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="sh">"</span><span class="s">System Log</span><span class="sh">"</span><span class="p">,</span> <span class="n">autoscroll</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">enable_events</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
        <span class="n">sg</span><span class="p">.</span><span class="nc">Button</span><span class="p">(</span><span class="sh">"</span><span class="s">Save</span><span class="sh">"</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="sh">"</span><span class="s">Save</span><span class="sh">"</span><span class="p">,</span> <span class="n">enable_events</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
        <span class="n">sg</span><span class="p">.</span><span class="nc">Button</span><span class="p">(</span><span class="sh">"</span><span class="s">Exit</span><span class="sh">"</span><span class="p">,</span> <span class="n">enable_events</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">system_log_layout</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">HR</span><span class="p">():</span>
    <span class="sh">'''</span><span class="s"> Creates layout for heart rate graph </span><span class="sh">'''</span>
    <span class="n">heart_rate_layout</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Text</span><span class="p">(</span><span class="sh">'</span><span class="s">Graph of Heart Rate</span><span class="sh">'</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="sh">"</span><span class="s">Times New Roman</span><span class="sh">"</span><span class="p">,</span> <span class="mi">20</span><span class="p">))],</span>
        <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Canvas</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="sh">"</span><span class="s">Heart Canvas</span><span class="sh">"</span><span class="p">)],</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">heart_rate_layout</span>

<span class="k">def</span> <span class="nf">pulse_reading</span><span class="p">():</span>
    <span class="sh">'''</span><span class="s"> Creates layout for pulse waveform graph</span><span class="sh">'''</span>
    <span class="n">pulse_reading_layout</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Text</span><span class="p">(</span><span class="sh">'</span><span class="s">Graph of Pulse Reading</span><span class="sh">'</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="sh">"</span><span class="s">Times New Roman</span><span class="sh">"</span><span class="p">,</span> <span class="mi">20</span><span class="p">))],</span>
        <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Canvas</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="sh">"</span><span class="s">Pulse Canvas</span><span class="sh">"</span><span class="p">)],</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">pulse_reading_layout</span>

<span class="k">def</span> <span class="nf">sliders</span><span class="p">():</span>
    <span class="sh">'''</span><span class="s"> Creates layout for sliders</span><span class="sh">'''</span>
    <span class="n">sliders_layout</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Column</span><span class="p">([[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Text</span><span class="p">(</span><span class="sh">"</span><span class="s">Lower Threshold</span><span class="sh">"</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="sh">'</span><span class="s">Lower Threshold</span><span class="sh">'</span><span class="p">)],</span>
                    <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Slider</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="sh">'</span><span class="s">horizontal</span><span class="sh">'</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">80</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="sh">"</span><span class="s">Lower HR</span><span class="sh">"</span><span class="p">,</span> <span class="n">enable_events</span><span class="o">=</span><span class="bp">True</span><span class="p">)]])],</span>
        <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Column</span><span class="p">([[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Text</span><span class="p">(</span><span class="sh">"</span><span class="s">Upper Threshold</span><span class="sh">"</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="sh">'</span><span class="s">Upper Threshold</span><span class="sh">'</span><span class="p">)],</span>
                    <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Slider</span><span class="p">(</span><span class="n">orientation</span><span class="o">=</span><span class="sh">'</span><span class="s">horizontal</span><span class="sh">'</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="mi">80</span><span class="p">,</span><span class="mi">160</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="sh">"</span><span class="s">Upper HR</span><span class="sh">"</span><span class="p">,</span> <span class="n">enable_events</span><span class="o">=</span><span class="bp">True</span><span class="p">)]])]</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">sliders_layout</span>

<span class="k">def</span> <span class="nf">display_HR</span><span class="p">():</span>
    <span class="sh">'''</span><span class="s">Creates frame to display current heart rate</span><span class="sh">'''</span>
    <span class="n">HR_Display</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Frame</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sh">''</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="p">[[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Text</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">Current Heart Rate: </span><span class="si">{</span><span class="n">HeartRate</span><span class="si">}</span><span class="s"> BPM</span><span class="sh">'</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="sh">"</span><span class="s">Times New Roman</span><span class="sh">"</span><span class="p">,</span> <span class="mi">26</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="sh">'</span><span class="s">Current HR</span><span class="sh">'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">2</span><span class="p">))]])],</span> 
        <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Frame</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sh">''</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="p">[[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Text</span><span class="p">(</span><span class="sh">''</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="sh">"</span><span class="s">Times New Roman</span><span class="sh">"</span><span class="p">,</span> <span class="mi">26</span><span class="p">),</span> <span class="n">text_color</span><span class="o">=</span><span class="sh">"</span><span class="s">red</span><span class="sh">"</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="sh">'</span><span class="s">HR alarm</span><span class="sh">'</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mi">2</span><span class="p">))]])]</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">HR_Display</span>

<span class="k">def</span> <span class="nf">addPlot</span><span class="p">(</span><span class="n">canvasElement</span><span class="p">):</span>
    <span class="sh">'''</span><span class="s">
    Takes in canvas element and generates a plot on the canvas with set physical dimensions
    </span><span class="sh">'''</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="nc">Figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
    <span class="n">canvas</span> <span class="o">=</span> <span class="n">canvasElement</span><span class="p">.</span><span class="n">TKCanvas</span>
    <span class="n">figAgg</span> <span class="o">=</span> <span class="nc">FigureCanvasTkAgg</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">canvas</span><span class="p">)</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="p">.</span><span class="nf">add_subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">figAgg</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="n">figAgg</span><span class="p">.</span><span class="nf">get_tk_widget</span><span class="p">().</span><span class="nf">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="sh">"</span><span class="s">top</span><span class="sh">"</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="sh">"</span><span class="s">both</span><span class="sh">"</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ax</span><span class="p">,</span> <span class="n">figAgg</span>

<span class="k">def</span> <span class="nf">create_graph</span><span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">,</span> <span class="n">figAgg1</span><span class="p">,</span> <span class="n">figAgg2</span><span class="p">,</span> <span class="n">PulseData</span><span class="p">,</span> <span class="n">HeartRate</span><span class="p">,</span> <span class="n">pulse_time</span><span class="p">,</span> <span class="n">HR_time</span><span class="p">,</span> <span class="n">HR_data</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">pulsedatapointcounter</span><span class="p">,</span> <span class="n">HRdatapointcounter</span><span class="p">,</span> <span class="n">counter1</span><span class="p">,</span> <span class="n">counter2</span><span class="p">,</span> <span class="n">pulse</span><span class="p">,</span> <span class="n">moving_average</span><span class="p">):</span>
    <span class="sh">'''</span><span class="s"> 
     Creates plot in given window
    </span><span class="sh">'''</span>
    <span class="n">ax1</span><span class="p">.</span><span class="nf">cla</span><span class="p">()</span>
    <span class="n">ax2</span><span class="p">.</span><span class="nf">cla</span><span class="p">()</span>
    <span class="n">ax1</span><span class="p">.</span><span class="nf">set_title</span><span class="p">(</span><span class="sh">"</span><span class="s">Pulse</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">ax1</span><span class="p">.</span><span class="nf">set_xlabel</span><span class="p">(</span><span class="sh">"</span><span class="s">Time (s)</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">ax1</span><span class="p">.</span><span class="nf">set_ylabel</span><span class="p">(</span><span class="sh">"</span><span class="s">Amplitude</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">ax2</span><span class="p">.</span><span class="nf">set_title</span><span class="p">(</span><span class="sh">"</span><span class="s">Heart Rate</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">ax2</span><span class="p">.</span><span class="nf">set_xlabel</span><span class="p">(</span><span class="sh">"</span><span class="s">Time (s)</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">ax2</span><span class="p">.</span><span class="nf">set_ylabel</span><span class="p">(</span><span class="sh">"</span><span class="s">HR (BPM)</span><span class="sh">"</span><span class="p">)</span>

    <span class="k">if</span>  <span class="n">pulsedatapointcounter</span> <span class="o">&lt;</span> <span class="n">counter1</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range </span><span class="p">(</span><span class="n">pulsedatapointcounter</span><span class="p">,</span> <span class="n">pulsedatapointcounter</span> <span class="o">+</span> <span class="mi">50</span><span class="p">):</span>
            <span class="n">pulse</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">PulseData</span><span class="p">[</span><span class="n">i</span><span class="o">%</span><span class="mi">50</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">PulseData</span><span class="p">:</span>
            <span class="n">pulse</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">pulse</span><span class="p">,</span> <span class="nf">int</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        
    <span class="k">if</span> <span class="n">HRdatapointcounter</span> <span class="o">&lt;</span> <span class="n">counter2</span><span class="p">:</span>
        <span class="n">HR_data</span><span class="p">[</span><span class="n">HRdatapointcounter</span><span class="p">]</span> <span class="o">=</span> <span class="n">HeartRate</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">HR_data</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">HR_data</span><span class="p">,</span> <span class="n">HeartRate</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range </span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span>
            <span class="n">moving_average</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">mean</span><span class="p">(</span><span class="n">HR_data</span><span class="p">[</span><span class="n">HRdatapointcounter</span> <span class="o">-</span> <span class="n">counter2</span><span class="p">:</span><span class="n">HRdatapointcounter</span><span class="p">])</span>
    
    <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">HR_data</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">counter2</span><span class="p">:</span>
        <span class="n">ax1</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">pulse_time</span><span class="p">,</span> <span class="n">pulse</span><span class="p">)</span>
        <span class="n">ax2</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">HR_time</span><span class="p">,</span> <span class="n">HR_data</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="sh">"</span><span class="s">HR (BPM)</span><span class="sh">"</span><span class="p">)</span>
        
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax1</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">pulse_time</span><span class="p">,</span> <span class="n">pulse</span><span class="p">[</span><span class="n">pulsedatapointcounter</span> <span class="o">-</span> <span class="mi">200</span><span class="p">:</span><span class="n">pulsedatapointcounter</span><span class="p">])</span>
        <span class="n">ax2</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">HR_time</span><span class="p">,</span> <span class="n">HR_data</span><span class="p">[</span><span class="n">HRdatapointcounter</span> <span class="o">-</span> <span class="mi">4</span><span class="p">:</span><span class="n">HRdatapointcounter</span><span class="p">],</span> <span class="n">label</span> <span class="o">=</span> <span class="sh">"</span><span class="s">Current HR</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">ax2</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">HR_time</span><span class="p">,</span> <span class="n">moving_average</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sh">"</span><span class="s">Moving Average</span><span class="sh">"</span><span class="p">)</span>
        
    <span class="n">HRdatapointcounter</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">pulsedatapointcounter</span> <span class="o">+=</span> <span class="mi">50</span>
    
    <span class="k">if</span> <span class="n">HRdatapointcounter</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">ax2</span><span class="p">.</span><span class="nf">legend</span><span class="p">()</span>
    
    <span class="n">figAgg1</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="n">figAgg2</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>
    <span class="n">figAgg1</span><span class="p">.</span><span class="nf">flush_events</span><span class="p">()</span>
    <span class="n">figAgg2</span><span class="p">.</span><span class="nf">flush_events</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">HR_data</span><span class="p">,</span> <span class="n">HRdatapointcounter</span><span class="p">,</span> <span class="n">pulsedatapointcounter</span><span class="p">,</span> <span class="n">pulse</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>

<span class="k">def</span> <span class="nf">create_window</span><span class="p">():</span>
    <span class="sh">'''</span><span class="s"> 
    Creates entire GUI window, compiling existing functions that output layouts into one formatted output
    </span><span class="sh">'''</span>
    <span class="c1"># Define lower and upper thresholds to be 
</span>    <span class="n">lower</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">upper</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># Create window with title and theme etc.
</span>    <span class="n">sg</span><span class="p">.</span><span class="nf">theme</span><span class="p">(</span><span class="sh">"</span><span class="s">BluePurple</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">layout</span>  <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Text</span><span class="p">(</span><span class="sh">'</span><span class="s">Heartbeat Measurinator 3000</span><span class="sh">'</span><span class="p">,</span> <span class="n">font</span> <span class="o">=</span><span class="p">(</span><span class="sh">"</span><span class="s">Times New Roman</span><span class="sh">"</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">justification</span><span class="o">=</span><span class="sh">'</span><span class="s">center</span><span class="sh">'</span><span class="p">)],</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Column</span><span class="p">(</span><span class="nf">pulse_reading</span><span class="p">(),</span> <span class="n">key</span> <span class="o">=</span> <span class="sh">'</span><span class="s">Pulse Graph</span><span class="sh">'</span><span class="p">),</span>
             <span class="n">sg</span><span class="p">.</span><span class="nc">Column</span><span class="p">(</span><span class="nc">HR</span><span class="p">(),</span> <span class="n">key</span> <span class="o">=</span> <span class="sh">'</span><span class="s">Heart Rate Graph</span><span class="sh">'</span><span class="p">,</span> <span class="n">justification</span><span class="o">=</span><span class="sh">'</span><span class="s">center</span><span class="sh">'</span><span class="p">),</span> <span class="p">]</span>
        <span class="p">],</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="nc">Column</span><span class="p">(</span><span class="nf">sliders</span><span class="p">()),</span>
            <span class="n">sg</span><span class="p">.</span><span class="nc">Column</span><span class="p">(</span><span class="nf">system_log</span><span class="p">()),</span>
            <span class="n">sg</span><span class="p">.</span><span class="nc">Column</span><span class="p">(</span><span class="nf">display_HR</span><span class="p">())]</span>
        <span class="p">]</span>
    <span class="p">]</span>
    <span class="c1"># label sliders and create window with title
</span>    <span class="n">slider_keys</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">Lower HR</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Upper HR</span><span class="sh">"</span><span class="p">]</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">sg</span><span class="p">.</span><span class="nc">Window</span><span class="p">(</span><span class="sh">"</span><span class="s">Canvas Window</span><span class="sh">"</span><span class="p">,</span> <span class="n">layout</span><span class="p">,</span> <span class="n">finalize</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">800</span><span class="p">),</span> <span class="n">resizable</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">window</span><span class="p">.</span><span class="nf">set_title</span><span class="p">(</span><span class="sh">"</span><span class="s">Pulse Monitor System</span><span class="sh">"</span><span class="p">)</span>
    <span class="c1"># Draw pulse rate graph
</span>    <span class="n">canvasElement1</span> <span class="o">=</span> <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">Pulse Canvas</span><span class="sh">"</span><span class="p">]</span>
    <span class="n">ax1</span><span class="p">,</span> <span class="n">figAgg1</span> <span class="o">=</span> <span class="nf">addPlot</span><span class="p">(</span><span class="n">canvasElement1</span><span class="p">)</span>
    <span class="n">figAgg1</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>

    <span class="c1"># draw Heart Rate graph
</span>    <span class="n">canvasElement2</span> <span class="o">=</span> <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">Heart Canvas</span><span class="sh">"</span><span class="p">]</span>
    <span class="n">ax2</span><span class="p">,</span> <span class="n">figAgg2</span> <span class="o">=</span> <span class="nf">addPlot</span><span class="p">(</span><span class="n">canvasElement2</span><span class="p">)</span>
    <span class="n">figAgg2</span><span class="p">.</span><span class="nf">draw</span><span class="p">()</span>

    <span class="c1"># initialise time for printing to log
</span>    <span class="n">time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">()</span>
    <span class="c1"># initialise packet variables to track packet order and no data counter.
</span>    <span class="n">no_data_counter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">last_number</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># initialise csv lists
</span>    <span class="n">csv_data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">csv_HR_value</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># time vectors initialised for graphs
</span>    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># graphing vectors initialised in correct space
</span>    <span class="n">HR_data</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">pulse</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">moving_average</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    
    <span class="n">counter1</span> <span class="o">=</span> <span class="mi">200</span>
    <span class="n">counter2</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">pulsedatapointcounter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">HRdatapointcounter</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="c1"># Take in occurrences of window
</span>        <span class="n">event</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="n">window</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># close window if required
</span>        <span class="k">if</span> <span class="n">event</span> <span class="ow">in</span> <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">WIN_CLOSED</span><span class="p">,</span> <span class="sh">"</span><span class="s">Exit</span><span class="sh">"</span><span class="p">]:</span>
            <span class="n">window</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
            <span class="k">break</span>
        <span class="c1"># set baseline threshold values based off slider movement (referenced via slider keys)
</span>        <span class="n">lower</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">upper</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># redefine thresholds if sliders interacted with
</span>        <span class="n">lower</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="sh">"</span><span class="s">Lower HR</span><span class="sh">"</span><span class="p">]</span>
        <span class="n">upper</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="sh">"</span><span class="s">Upper HR</span><span class="sh">"</span><span class="p">]</span>
        <span class="c1"># read data from microcontroller using data class
</span>        <span class="n">data</span><span class="p">,</span> <span class="n">HeartRate</span><span class="p">,</span> <span class="n">no_data_check</span><span class="p">,</span> <span class="n">sequence</span><span class="p">,</span> <span class="n">button</span> <span class="o">=</span> <span class="nf">interpretData</span><span class="p">()</span>
        <span class="c1"># update csv lists
</span>        <span class="n">csv_data</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">csv_HR_value</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">HeartRate</span><span class="p">)</span>
        <span class="c1"># update Heart Rate display
</span>        <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">Current HR</span><span class="sh">"</span><span class="p">].</span><span class="nf">update</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">Current Heart Rate: </span><span class="si">{</span><span class="n">HeartRate</span><span class="si">}</span><span class="s"> BPM</span><span class="sh">'</span><span class="p">)</span>
        
        <span class="c1"># Update window if heart rate is too high or low, or if packets are received out of sequence
</span>        <span class="nc">HR_Alarm</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">HeartRate</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">)</span>
        <span class="n">sequence</span><span class="p">,</span> <span class="n">last_number</span> <span class="o">=</span> <span class="nc">Packets</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">last_number</span><span class="p">,</span> <span class="n">window</span><span class="p">)</span>
        <span class="c1"># warn if data is not being registered after 5 repeats
</span>        <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">no_data_check</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
                <span class="n">no_data_counter</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">last_number</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">if</span> <span class="n">no_data_counter</span> <span class="o">&gt;=</span> <span class="mi">5</span><span class="p">:</span>
                    <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">System Log</span><span class="sh">"</span><span class="p">].</span><span class="nf">update</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="sh">"</span><span class="s">%a %b %d %H</span><span class="si">:</span><span class="o">%</span><span class="n">M</span><span class="si">:</span><span class="o">%</span><span class="n">S</span> <span class="o">%</span><span class="n">Y</span><span class="sh">"</span><span class="s">)</span><span class="si">}</span><span class="s">: No data detected</span><span class="se">\n</span><span class="sh">'</span><span class="p">,</span> <span class="n">append</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">no_data_counter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># time vectors update
</span>        <span class="n">pulse_time</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">linspace</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
        <span class="n">HR_time</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">linspace</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
        <span class="c1"># create plots
</span>        <span class="n">HR_data1</span><span class="p">,</span> <span class="n">HRdatapointcounter1</span><span class="p">,</span> <span class="n">pulsedatapointcounter1</span><span class="p">,</span> <span class="n">pulse1</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="nf">create_graph</span><span class="p">(</span><span class="n">ax1</span><span class="p">,</span> <span class="n">ax2</span><span class="p">,</span> <span class="n">figAgg1</span><span class="p">,</span> <span class="n">figAgg2</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">HeartRate</span><span class="p">,</span> <span class="n">pulse_time</span><span class="p">,</span> <span class="n">HR_time</span><span class="p">,</span> <span class="n">HR_data</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">pulsedatapointcounter</span><span class="p">,</span> <span class="n">HRdatapointcounter</span><span class="p">,</span> <span class="n">counter1</span><span class="p">,</span> <span class="n">counter2</span><span class="p">,</span> <span class="n">pulse</span><span class="p">,</span> <span class="n">moving_average</span><span class="p">)</span>
        <span class="c1"># redefine variables for iteration
</span>        <span class="n">HR_data</span> <span class="o">=</span> <span class="n">HR_data1</span>
        <span class="n">HRdatapointcounter</span> <span class="o">=</span> <span class="n">HRdatapointcounter1</span>
        <span class="n">pulsedatapointcounter</span> <span class="o">=</span> <span class="n">pulsedatapointcounter1</span>
        <span class="n">pulse</span> <span class="o">=</span> <span class="n">pulse1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">x1</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">y1</span>
        <span class="c1"># save CSV if button pressed in GUI or on board
</span>        <span class="k">if</span> <span class="n">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="nf">saveDataCSV</span><span class="p">(</span><span class="n">csv_data</span><span class="p">,</span> <span class="n">csv_HR_value</span><span class="p">)</span>
            <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">System Log</span><span class="sh">"</span><span class="p">].</span><span class="nf">update</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="sh">"</span><span class="s">%a %b %d %H</span><span class="si">:</span><span class="o">%</span><span class="n">M</span><span class="si">:</span><span class="o">%</span><span class="n">S</span> <span class="o">%</span><span class="n">Y</span><span class="sh">"</span><span class="s">)</span><span class="si">}</span><span class="s">: Data saved as SensorReadings.csv</span><span class="se">\n</span><span class="sh">'</span><span class="p">,</span> <span class="n">append</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="sh">"</span><span class="s">Save</span><span class="sh">"</span><span class="p">:</span>
            <span class="nf">saveDataCSV</span><span class="p">(</span><span class="n">csv_data</span><span class="p">,</span> <span class="n">csv_HR_value</span><span class="p">)</span>
            <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">System Log</span><span class="sh">"</span><span class="p">].</span><span class="nf">update</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="sh">"</span><span class="s">%a %b %d %H</span><span class="si">:</span><span class="o">%</span><span class="n">M</span><span class="si">:</span><span class="o">%</span><span class="n">S</span> <span class="o">%</span><span class="n">Y</span><span class="sh">"</span><span class="s">)</span><span class="si">}</span><span class="s">: Data saved as SensorReadings.csv</span><span class="se">\n</span><span class="sh">'</span><span class="p">,</span> <span class="n">append</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
        <span class="c1"># print slider movements into system log
</span>        <span class="k">for</span> <span class="n">slider_key</span> <span class="ow">in</span> <span class="n">slider_keys</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="n">slider_key</span><span class="p">:</span>
                <span class="n">slider_value</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">slider_key</span><span class="p">]</span>
                <span class="n">time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">()</span>
                <span class="n">window</span><span class="p">[</span><span class="sh">"</span><span class="s">System Log</span><span class="sh">"</span><span class="p">].</span><span class="nf">update</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="sh">"</span><span class="s">%a %b %d %H</span><span class="si">:</span><span class="o">%</span><span class="n">M</span><span class="si">:</span><span class="o">%</span><span class="n">S</span> <span class="o">%</span><span class="n">Y</span><span class="sh">"</span><span class="s">)</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">slider_key</span><span class="si">}</span><span class="s"> moved to </span><span class="si">{</span><span class="n">slider_value</span><span class="si">}</span><span class="s"> </span><span class="se">\n</span><span class="sh">'</span><span class="p">,</span> <span class="n">append</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
        
        
        
    <span class="n">window</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>

<span class="nf">create_window</span><span class="p">()</span></code></pre></figure>


</details>

<p><strong>Skills / tools</strong><br />
Arduino · Python · Signal processing · GUI development · Calibration &amp; validation · Documentation</p>

<hr />

<h2 id="machine-learning-model-for-heart-attack-risk-prediction"><a id="heart-attack-ml"></a>Machine Learning Model for Heart Attack Risk Prediction</h2>
<p><strong>Mar 2023 – May 2023</strong> · <em>University of Sydney</em></p>

<p><strong>Overview</strong><br />
Developed a Python-based ML pipeline to predict heart attack risk using annually updated health datasets, with emphasis on preprocessing, feature engineering, evaluation, and interpretability.</p>

<p><strong>Key contributions</strong></p>
<ul>
  <li>Performed data preprocessing and feature engineering for model-ready inputs</li>
  <li>Trained and evaluated models using accuracy, precision, recall, and F1-score</li>
  <li>Documented the workflow clearly and presented results to mixed audiences</li>
</ul>

<ul>
  <li>
    <details>
      <summary>View Report (PDF)</summary>

      <iframe src="/mypapers/Heart_Attack_Prediction_Machine_Learning/CardioCare_An_Intelligent_Heart_Attack_Predictor.pdf" style="width: 100%; height: 900px;" loading="lazy">
      </iframe>

      <a href="/mypapers/Heart_Attack_Prediction_Machine_Learning/CardioCare_An_Intelligent_Heart_Attack_Predictor.pdf" download="">
        Download Report (PDF)
      </a>
    </details>
  </li>
</ul>

<style>
details {
  margin-bottom: 1.25rem;
}

details > summary {
  cursor: pointer;
  font-size: 1.1rem;
  font-weight: 600;
  padding: 0.4rem 0;
}

details > summary:hover {
  text-decoration: underline;
}

details iframe {
  margin-top: 0.75rem;
}
</style>

<details>
  <summary>KNN / Weighted-NN</summary>
  <iframe src="/mypapers/Heart_Attack_Prediction_Machine_Learning/KNN_WNN.html" style="width: 100%; height: 900px; border: 1px solid #ddd; border-radius: 8px;" loading="lazy">
  </iframe>
</details>

<details>
  <summary>Logistic Regression</summary>
  <iframe src="/mypapers/Heart_Attack_Prediction_Machine_Learning/Logistic_Regression.html" style="width: 100%; height: 900px; border: 1px solid #ddd; border-radius: 8px;" loading="lazy">
  </iframe>
</details>

<details>
  <summary>Naive Bayes</summary>
  <iframe src="/mypapers/Heart_Attack_Prediction_Machine_Learning/Naive_Bayes.html" style="width: 100%; height: 900px; border: 1px solid #ddd; border-radius: 8px;" loading="lazy">
  </iframe>
</details>

<p><strong>Skills / tools</strong><br />
Python · Data preprocessing · Feature engineering · Model evaluation · Technical communication</p>

<hr />

<h2 id="want-to-connect">Want to connect?</h2>
<p>I’m actively seeking an entry-level / graduate opportunity (including roles I can start <strong>before graduation</strong>) to get a head start in my career. If my projects align with your team’s work, feel free to reach out.</p>

    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#index -->

<div class="footer-wrap">
  <footer>
    <h6>&copy; 2026 Sithma Gunawardena.
  Published with <a href="https://pages.github.com/" rel="nofollow">GitHub Pages</a>
  
</h6>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/main.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-T5N5JY1E21', 'caihanlin.com');
  ga('send', 'pageview');

</script>

<!-- https://analytics.google.com/analytics/ -->
<!-- Lastly modified by Hanlin CAI in 2023/01/15 -->

</body>
</html>